<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <script src="https://cdn.polyfill.io/v1/polyfill.js?features=Element.prototype.closest"></script>
  <link rel="stylesheet" href="dragManager.css">

</head>

<body>
<h2>Simple DnD</h2>
<div class="simple-dnd">
  <div style="height:64px">
    <img src="https://js.cx/browsers/chrome.svg" class="draggable many">
    <img src="https://js.cx/browsers/firefox.svg" class="draggable">
    <img src="https://js.cx/browsers/ie.svg" class="draggable">
    <img src="https://js.cx/browsers/opera.svg" class="draggable">
    <img src="https://js.cx/browsers/safari.svg" class="draggable">
  </div>

  <p>Браузер переносить сюда:</p>

  <div class="computer droppable">
  </div>
</div>

<h2>Tree DnD</h2>
<div class="tree-dnd">
  <ul id="tree">
    <li><span>Root</span>
      <ul>
        <li><span>Node 1.1</span>
          <ul>
            <li><span>Node 1.1.1</span>
              <ul>
                <li><span>Node 1.1.1.1</span></li>
              </ul>
            </li>
            <li><span>Node 1.1.2</span>
              <ul>
                <li><span>Node 1.1.2.1</span></li>
                <li><span>Node 1.1.2.2</span></li>
              </ul>

            </li>
          </ul>
        </li>
        <li><span>Node 1.2</span>
          <ul>
            <li><span>Node 1.2.1</span>
              <ul>
                <li><span>Node 1.2.1.1</span></li>
                <li><span>Node 1.2.1.2</span></li>
                <li><span>Node 1.2.1.3</span></li>
              </ul>
            </li>
            <li><span>Node 1.2.2</span>
              <ul>
                <li><span>Node 1.2.2.1</span></li>
                <li><span>Node 1.2.2.2</span></li>
                <li><span>Node 1.2.2.3</span></li>
                <li><span>Node 1.2.2.4</span></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</div>

<script src="./helpers.js"></script>
<script src="./dragObject.js"></script>
<script src="./dropZone.js"></script>
<script src="./dragZone.js"></script>
<script src="./dragManager.js"></script>

<script>
  let dragManager = new DragManager();

  let dropZone = new DropZone({container: qs('.droppable')});
  let dragZone = new DragZone({container: qs('.simple-dnd')});
  dragZone.addDropZone(dropZone);

  dropZone.onDragCancel = function (dragObject) {
    dragObject.avatar.remove();
  };

  dropZone.onDragEnd = function (dragObject, dropElem) {
    dragObject.shape.style.display = 'none';  // удаляет элемент
    dragObject.avatar.remove();
    dropElem.classList.add('computer-smile');
    setTimeout(function () {
      dropElem.classList.remove('computer-smile');
    }, 200);
  };

</script>

<script>
  let tree = document.getElementById('tree');
</script>


</body>

</html>